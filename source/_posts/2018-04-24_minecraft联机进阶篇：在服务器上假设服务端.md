---
title: Minecraft 联机进阶篇：在服务器上架设服务端
categories:
  - 教程
tags:
  - Minecraft
date: 2018-04-24 20:40:23
---

> 19年9月2日修排版：
>
> 而维护篇我没写……
>
> 这系列东西最初是友人 [SunnyRx](https://sunnyrx.com/) 想知道怎么在 linux 系统上跑起客户端然后我就写了一点……

最近会更新一系列关于 Minecraft 的联机教程，包括从整合服务端到架设在服务器上。先写了这一篇在服务器上架设。

入门篇啊……？过几天吧。维护篇在入门篇之后。

* * *

**本教程适用于有电脑相关知识基础之人士。**

* * *

将服务端跑在本地进行测试或联机，和架设在服务器上能够7x24运行的区别就只有一些细微的区别。服务器的安全措施不在本文讨论范围之内。

* * *

服务器的系统我推荐使用CentOS 7。

具体步骤
====

1.将服务端上传到服务器；
-------------

我用来传输用的软件是 pscp ，这是一个 putty 系的配套(算是吧?)软件。在 Windows 环境下，可以使用 CMD 或 PowerShell 来进行操作。通常情况下会用到的指令及参数如下。

命令：pscp \[本地文件路径\] \[服务器用户名\]@\[服务器地址\]:\[路径\]

例子：pscp d:\\1.txt root@1.1.1.1:/root

参数： -P 1234 —— 指定 SSH 连接端口，通常情况下不用这个参数，但若服务端为了安全有更改这个连接端口就要用了。

-pw 1234 —— 指定登录时使用的密码，我多数也不用。不指定的话执行指令后也会向你询问密码。

备注：命令最后的 /root 意思就是把上传的文件放在根目录(?)，通俗点说就像是 Windows 下的桌面。

> 19年9月2日修排版注释：
>
> 我的服务器几乎都是专用用途，比方说开 MC 服的就只搞 MC 服，因此干脆都用 root 用户。

通常一个服务器我就只用来跑 MC 的服务端，不进行其他操作，那么不另起文件夹放也没问题。

在传之前最好把服务端文件夹打包成 .tar 格式，这样在服务器上只要简单地用 tar xvf 1234.tar 就能简单地解开了。压缩传输基本没有必要，因为服务端本体其实不大。用 7z 之类的压缩还要在服务端上用 7z 解压，何必呢……

2.在服务器上安装 Screen；
-----------------

Screen 的作用类似 Windows 下的任务栏，能在多个窗口内同时执行程序。否则直接用 SSH 连接上去开服后，当 SSH 断开连接，服也会关掉的。

另：管理 MC 服务端相关事宜请使用 PC 端的 SSH 连接软件。(就用 putty 吧，多好用啊)否则有其他的问题，稍后将进行说明。

安装很简单，一行指令。

sudo yum install screen

一路看提示，该y的y，很快。

示例： screen -S mcserver —— 新增一个名为 mcserver 的窗口，并切换到它。

screen -r mcserver —— 回到 mcserver 这个窗口。

screen -ls —— 之前开的窗口名字忘了？把所有窗口列出来看看就好了。

Ctrl+A , D —— 意思是先按 Ctrl+A ，然后单独按 D 。通俗地可以理解成把 Windows 的窗口最小化。

Ctrl+A , X —— 既然是 X 就是理所当然地把窗口关掉了。

备注：Ctrl+A 是在窗口内执行的，是让 screen 准备接收指令。如上文中的 D 和 X 。手机上多数的 SSH 软件不支持发送 Ctrl+A ，所以打个 top 看看占用还可以，管理就别了吧。

> 19年9月2日修排版：
>
> 用 termux 吧。

3.在服务器上安装 JRE / JDK；
--------------------

即使在 Windows 上开服务端也要“装 Java”，在 Linux 服务器上为什么不呢~

JRE：Java Runtime Environment / JDK: Java Development Kit

翻译是 Java 运行环境 / Java 开发工具。

正如我前文所说，这个服务器单就用来开服就好了，装 JRE 即可。

如果直接去搜 “install jre centos”，是会发生大惨事的。各种教程会告诉你先去下个jre，传到服务器上，解压，手动复制，写变量……一通操作下来只要哪里有问题，基本上就可以删硬盘重来了。我们需要的只是 JRE ，那为什么不走一条轻松一点的路线呢？

sudo yum install java-1.8.0-openjdk 搞定了。

> 19年9月2日修排版注释：
>
> 其实也有别的版本，不止 java8 ，多利用 Google 吧。

4.运行；
-----

使用步骤 2 提到的 screen 命令来开一个新的窗口： screen -S mcserver  —— 这个 mcserver 当然你可以自己改了，只是个名字。

使用 cd 命令切换到服务端所在的文件夹，使用命令启动服务端即可。

通常情况下我不推荐每次都敲命令，存成一个 .sh 文件岂不美哉？顺便提供一个我常用的，参数什么的可以详细自己去查，再改：

java -d64 -server -XX:+UseG1GC -XX:MaxGCPauseMillis=100 -XX:+UseStringDeduplication -Xms1G -Xmx2560M -XX:hashCode=5 -Dfile.encoding=UTF-8 -jar forge-1.10.2-12.18.3.2511-universal.jar nogui

-Xms  1G —— 初始分配 1G 内存

-Xmx 2560M —— 最大分配 2560M 内存

-jar forge-1.10.2-12.18.3.2511-universal.jar —— 服务端本体的名字

为什么会有 nogui 呢，因为这条命令在我这里基本是通用的，我懒得改。

5.其他操作。
-------

以我自己用的阿里云为例，还需要写安全组规则，使得 MC 服务器使用的端口能够通信。

在阿里云上的操作是：查看实例 - 更多 - 安全组配置 - 配置规则

在此处参考其他现有的规则，比如 22 端口的出入(这是SSH连接的默认端口)，加上允许 MC 服务端的默认端口出入的规则即可，默认是 25565 。

Ctrl+A , D，关掉 SSH 连接(软件)，打开 MC 输入服务器地址玩即可。

另：服务端配置选择： 我个人的习惯是 2 个主游玩 mod 辅以数个小 mod 。比如本次 1.10.2 版本选用的是沉浸科技和神秘。

就目前国内多数的服务器提供商的配置来看，多数以 CPU 核心数和内存大小，以及带宽(上传)来决定价钱。而类似我这样的 modpack ，需要的硬件配置是 2 核心，4G 内存，带宽(上传)是 1M 。

1M的上行约能允许10人以下游玩。如果服务器长期有10人及以上游玩，再考虑升级带宽。

**除了接近原版的服务端之外，我都推荐使用这样的配置。**

低一档的是 1 核心，2G 内存。如果 mod 多，服务端跑起来之后只会看到一大堆具体内容都是服务器过于卡顿的刷屏信息。至于核心是什么 CPU 的核心不用去在意，在性能上不会有太大差别。

* * *

完。

* * *

写完之后想了想，以后来做个目录吧。 入门篇 \- 做一个合格的整合包。 进阶篇 \- 在服务器上架设服务端。 维护篇 \- Mod升级及服务器安全。