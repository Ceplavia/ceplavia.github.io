---
title: 视点：搭台理论
date: 2019-11-09 14:24:01
categories: 
  - 视点
tags:
  - 匹配机制
---

### 搭台？

**搭台**是一个粤语词，指相识或不相识的两方，在外吃饭（多为早茶）时，共同使用一张桌子的行为。

<!-- more -->

比方说，一张 4 人桌，在先到的一方同意下，就可以坐 2 组 2 人的食客，这种情况在一些公认好吃的茶楼里经常出现。

但可以肯定的一点是我这博客并不是介绍茶楼的，今天来谈谈优先考虑匹配时间的匹配机制。

### 这次拿谁开刀？

今天拿 PUBG 的匹配机制作为举例，以我实际游玩的经验，嗯……总游戏时间是 551 小时，在雪地图出来之后应该也有 200 小时。

首先声明一个情况，海岛、沙漠、雨林、雪地这四个图，在考虑单排、双排、四排都有人的情况下，假定某一个模式或地图几乎排不到人，我就拿**双人沙漠**来举例了，因为在实际玩的时候，我比较多玩双排模式，而沙漠图是排得最久的，有时甚至要切换为双人四排才能进入。此外，把每一「局」当作是一个游戏房间的话，比较好理解。

根据看微博的 PUBG 国内运营帐号下面的评论，以及小黑盒 APP 里的讨论，不难发现关于排地图的事情上，都有公认的认识，就是「某一次更新之后，就是四个图机率差不多，玩久了之后又变成两个图来回排了。

这种情况就能用搭台理论来解释了。

### 举个例子

当玩家因为某些原因而需要在等待游戏开局时离开，比方说有队友游戏崩溃，出现 BUG 见不到其它队友，就会对匹配系统的判断有所影响。

自从某一次更新后， PUBG 加入了选中图时，给出一个预计进入游戏时间的功能，于是我对 PUBG 的匹配系统猜想是这样的：

每个地图根据已加入的**队伍数**（即使是 1 人也当成是一个队伍），以及达成这个队伍数的时间，会计算出一个权值 A 。队伍数越多，加入得越快，则这个权值 A 越大，反之则小。

每队玩家根据**完成比赛的记录**，对不同地图亦分别计算出权值 B 。若队伍构成出现变动，则此权值 B 一律重置。

将两方权值按地图相加，然后将队伍分配至权值较高的地图，等待游戏开始。

还记得前面我提到过 PUBG 专门「优化」过进入游戏时间的事吗？也就是说，权值 A 的权重很高。比起「让玩家均衡地游玩各个地图」，实际上优先的情况是「让玩家更快地进入游戏」。

于是就会出现「只要一个地图模式有人不喜欢玩」，就会影响这个地图难以被匹配到的情况。在队伍进入某地图，然后又退出的过程中，实际是「拖慢」了当前地图完成匹配的速度，于是相对地其它「房间」从空房间到满房间的时间是缩短的。一个队伍的操作并不会有多大影响，但这会造成一个势，慢慢地扩大到：这个地图模式尽管从大部分队伍的权值 B 来看，是趋向创建新的该地图模式房间的。但实际由于权值 A 的权重太高（这一点从大多数地图模式的匹配时间都是5~8秒就能看得出来），**系统倾向分配玩家至能够更快开始游戏的地图**。

就像爆满的茶楼，当某桌子有 2 人空余，可供搭台的情况下，咨客会优先让你去这个桌子，而不是等下一个空的 4 人桌。

为了易于理解，假定桌子都是 4 人桌，食客构成只有 2 和 4 人。

坐着 4 人的桌子，可以变成 2+2 人的桌子，但坐着 2+2 人的桌子，却很难变成 4 人桌。因为 2 人吃完埋单，这桌子就可以有新的 2 人来搭台。而要这张桌子变成 4 人桌，则需要双方食客同时结帐离开。此外当然还要看食客构成了。

但现实却不会出现 4 人很难用餐的情况，因为 4 人桌变为 2+2 人桌的情况是少数，咨客的工作是保证所有食客公平地进入餐厅用餐，**而不是保证所有食客尽快进入餐厅用餐**。并且，现实有「重置」的情况，当茶市结束，所有的桌子就会被重置到正常情况。

于是就有了前面所说的「某次更新之后每个图都能排到，玩一段时间之后又就只有两个图」的情况。

### 怎么办呢

要改善这种情况，适当地调整不同权值的权重或许可以对情况有改善，但我认为更好的处理方法应该是：周期性地重置地图本身的权值 A ，使得玩家队伍权值 B 能够发挥作用。

游戏本身是连续游玩的情况下，这种延长排队时间的机制对于不同人群可能会有不同的反应。

一种是恨不得死了之后按一个键马上开始重新跳伞，无脑只要「进行游戏过程」的人。

一种是在每局游戏之间希望有些「休息时间」并进行讨论的人。

但不管怎么说，每局游戏之间间隔只有个位数秒的话，我认为并不是一个还需要「加快匹配」的情况，对于我来说，局与局之间间隔个半分钟还是可以接受的。

### 别的

但我觉得 PUBG 对于新一局的创建，不是创建空局并将玩家加入，而更像是攒够了差不多的玩家后才创建空局将玩家加入。而在「攒」的这段时间，仍然将玩家匹配至其它局，以减少等待时间。

不管怎么说还是机制问题，匹配系统只能倾向一方，要么公平，要么够快。

不过虽说 PUBG 的，被检测数据异常后会被强制踢出该局游戏，但对该局游戏本身的影响还在，与其说侧重改善匹配系统，我更希望改善防外挂这个方面。